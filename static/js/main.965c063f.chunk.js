(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a.p+"static/media/dottedCircle.c96ca893.svg"},108:function(e,t,a){e.exports=a.p+"static/media/CompletedTick.ffcb10fd.svg"},109:function(e,t,a){e.exports=a.p+"static/media/DownloadIcon.e927ae19.svg"},113:function(e,t,a){"use strict";a.r(t);var n,r=a(26),c=a(11),o=a.n(c),i=a(19),l=a(63),s=a(8),u=a(0),m=a.n(u),d=a(114),p=a(108),f=a.n(p),h=a(109),b=a.n(h),g=a(166),y=a(234),v=a(277),E=a(209),O=a(50),j=a(235),w=a(231),x=a(274),S=a(233),k=a(228),C=a(232),T=a(230),z=a(229),I=function(e){var t=e.isOpen,a=e.handleCancel,n=e.handleDelete,r=Object(u.useState)(!1),c=Object(s.a)(r,2),o=c[0],i=c[1];return m.a.useEffect(function(){console.log(o)},[o]),m.a.createElement("div",null,m.a.createElement(k.a,{style:{zIndex:1500},open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.a.createElement(z.a,{id:"alert-dialog-title"},"Delete this song from your device ?"),m.a.createElement(T.a,null,m.a.createElement(w.a,{control:m.a.createElement(x.a,{color:"primary",checked:o,onChange:function(e){return i(e.target.checked)},value:"checkBox"}),label:"Don't ask again"})),m.a.createElement(C.a,null,m.a.createElement(S.a,{onClick:a,color:"primary"},"Cancel"),m.a.createElement(S.a,{onClick:function(){return n(o)},color:"primary"},"Delete"))))},R=a(18),D=a(68),P=a(28);a.d(t,"useSongMethods",function(){return N});var N=function(e){var t=Object(u.useContext)(R.a),a=Object(s.a)(t,2);Object(l.a)(a[0]);var r=a[1],c=m.a.useCallback(function(e){r({type:"setSnackbarMsg",snippet:e})},[r]),d=Object(u.useState)(!1),p=Object(s.a)(d,2),f=p[0],h=p[1],b=Object(u.useState)(null),g=Object(s.a)(b,2),y=g[0],v=g[1];Object(u.useEffect)(function(){var e="true"===localStorage.getItem("dontAskPopup");v(e)},[]);var E=function(){var e=Object(i.a)(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("/song",{params:{id:t}});case 2:return a=e.sent,e.next=5,Object(P.c)(t,a.data);case 5:n=e.sent,c("Song Downloaded"),console.log("song status",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.b)(n);case 2:e.sent,h(!1),c("Deleted Successfully"),console.log(n,t),t&&(localStorage.setItem("dontAskPopup",!0),v(!0));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=y?null:m.a.createElement(I,{isOpen:f,handleCancel:function(){return h(!1)},handleDelete:O});return{handleDownload:E,handleRemoveSong:function(e){console.log("handle remove dude"),n=e,y?O():h(!0)},deleteTheSong:O,dontAskPopup:y,setDeleteDialogState:h,deleteDialogState:f,deleteDialogComponent:j}};t.default=function(e){var t=e.songs,a=Object(u.useContext)(R.a),n=Object(s.a)(a,2);Object(l.a)(n[0]);var c=n[1],o=Object(u.useState)(window.innerHeight),i=Object(s.a)(o,2),p=(i[0],i[1]),h=function(e){var t;t={id:e.videoId,audio:e.audio,thumbnail:e.thumbnail,title:e.title,channelTitle:e.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.videoId,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.videoId,"/sddefault.jpg")},c({type:"setCurrentVideoSnippet",snippet:t})},w=N(),x=w.handleDownload,S=w.handleRemoveSong,k=w.deleteDialogComponent,C=function(e){return"downloading"===e.downloadState?(console.log(e.downloadState),"downloading-animation"):""};Object(u.useEffect)(function(){p(window.innerHeight)});var T=t.map(function(e,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement(g.a,{alignItems:"flex-start",button:!0,onClick:function(){return h(e)}},m.a.createElement(y.a,null,m.a.createElement(v.a,{className:"searchThumb",style:{width:"60px",height:"60px",marginRight:"15px"},alt:e.title,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg")})),m.a.createElement(E.a,{primary:e.title,secondary:m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,{component:"span",variant:"body2",color:"textPrimary"},e.channelTitle))})),m.a.createElement("div",{className:"download-container",onClick:function(){return e.audio?S(e.videoId):x(e.videoId)}},m.a.createElement("div",{className:"badge-container"},m.a.createElement("img",{className:C(e),src:e.audio?f.a:b.a,alt:"downloading icon"}))))}),z=m.a.forwardRef(function(e,t){return m.a.createElement("div",{ref:t,style:Object(r.a)(Object(r.a)({},e.style),{},{maxWidth:"1000px",left:"50%",transform:"translateX(-50%)"})},T[e.index],m.a.createElement(j.a,null))});return m.a.createElement(m.a.Fragment,null,k,m.a.createElement(d.a,{height:window.innerHeight-100,itemCount:t.length,width:window.innerWidth},z))}},120:function(e,t,a){},129:function(e,t,a){e.exports=a(164)},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),i=(a(134),a(18)),l=a(8),s=a(27),u=a(21),m=a(11),d=a.n(m),p=a(19),f=a(211),h=a(212),b=a(168),g=a(118),y=a(214),v=a(213),E=a(43),O=a.n(E),j=a(102),w=a.n(j),x=O.a.create({baseURL:"https://suggestqueries.google.com/complete/search?",adapter:w.a,params:{hl:"en",ds:"yt",client:"youtube"},headers:{"Access-Control-Allow-Origin":"*"}}),S=a(166),k=a(207),C=a(209),T=a(210),z=a(208),I=function(e){var t=e.results,a=e.onSearchSelect,n=[];return t&&(n=t.map(function(e,t){return r.a.createElement(S.a,{key:t,onClick:function(){return a(e[0])},button:!0},r.a.createElement(k.a,{style:{paddingLeft:"16px"}},r.a.createElement(z.a,null)),r.a.createElement(C.a,{primary:e[0]}))})),r.a.createElement(T.a,null,n)},R=a(64),D=Object(u.f)(function(e){var t=e.history,a=e.location,c=new URLSearchParams(a.search),o=Object(n.useContext)(i.a),s=Object(l.a)(o,2),u=s[0].searchState,m=s[1],E=Object(n.useCallback)(function(e){m({type:"setSearchState",snippet:e})},[m]),O=Object(n.useCallback)(function(e){console.log(e),m({type:"setSearchResult",snippet:e})},[m]),j=Object(n.useState)(""),w=Object(l.a)(j,2),S=w[0],k=w[1],C=Object(n.useState)(""),T=Object(l.a)(C,2),z=T[0],D=T[1],P=Object(n.useState)(null),N=Object(l.a)(P,2),A=N[0],M=N[1],L=Object(n.useState)(!0),V=Object(l.a)(L,2),F=V[0],H=V[1];console.log("search box re rendered");var U=function(e){k(e),M(e),E("searching"),t.push({pathname:"/search",search:"?q=".concat(e)})},W=function(){var e=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("",{params:{q:S}});case 2:t=e.sent,D(t.data[1]);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){A&&""!==A&&function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("/search",{params:{q:t,maxResults:15}});case 2:a=e.sent,O(a.data.items),E("completed");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(A)},[A,O,E]),Object(n.useEffect)(function(){console.log("search state",u)},[u]),Object(n.useEffect)(function(){var e=c.get("q");e&&(M(e),k(e),E("searching"),console.log("changing query to",e))},[E,M]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{onClick:function(){E("home"),"/search"===t.location.pathname&&t.goBack()},color:"inherit","aria-label":"Menu"},r.a.createElement(v.a,null)),r.a.createElement("form",{style:{width:"100%"},onSubmit:function(e){return function(e){e.preventDefault(),console.log(e.target.lastChild),e.target.lastChild.lastChild.blur(),E("searching"),M(S),t.push({pathname:"/search",search:"?q=".concat(S)})}(e)}},r.a.createElement(g.a,{fullWidth:!0,placeholder:"Search...",autoFocus:!0,style:{color:"#fff",paddingLeft:"16px"},value:S,onChange:function(e){k(e.target.value),W()},onClick:function(){E("clicked"),H(!0)}})),r.a.createElement(y.a,{className:"searchPopper",open:F,anchorEl:document.getElementById("navbar"),popperOptions:{modifiers:{preventOverflow:{padding:0}}},placement:"bottom"},function(){switch(u){case"searching":return r.a.createElement(f.a,{style:{height:"100vh"},container:!0,justify:"center",alignItems:"center"},r.a.createElement(h.a,null));case"clicked":return r.a.createElement(I,{results:z,onSearchSelect:U});case"completed":H(!1)}console.log("Function ran")}))}),P=a(216),N=a(50),A=a(218),M=a(219),L=a(215),V=a(217),F={root:{flexGrow:1},title:{textAlign:"center",width:"calc(100% - 96px)"},input:{color:"#fff"}};function H(e){var t=e.children,a=Object(L.a)();return r.a.createElement(P.a,{appear:!1,direction:"down",in:!a},t)}var U=Object(u.f)(function(e){var t=Object(n.useContext)(i.a),a=Object(l.a)(t,2),c=a[0].searchState,o=a[1],s=r.a.useCallback(function(e){console.log(e),o({type:"setSearchState",snippet:e})},[o]);return r.a.useEffect(function(){var t=function(){var t=e.history.location.pathname;s("/search"===t?"searching":"home"),console.log("history change detected in app bar")};t(),e.history.listen(function(e){t()})},[s,e.history]),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,e,r.a.createElement(A.a,{id:"navbar",position:"sticky"},r.a.createElement(M.a,null,"home"===c?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"inherit","aria-label":"Menu",onClick:function(){return e=!0,console.log(e),void o({type:"setMenuOpen",snippet:e});var e}},r.a.createElement(V.a,null)),r.a.createElement(N.a,{variant:"h6",color:"inherit",style:F.title},"Ylight Music"),r.a.createElement(b.a,{onClick:function(){return s("clicked")},color:"inherit","aria-label":"Search"},r.a.createElement(z.a,null))):r.a.createElement(D,null)))))}),W=a(67),B=a(220),q=a(221),Y=a(222),K=a(223),G=function(e){var t=e.player,a=e.audioState,n=e.minimized;return r.a.createElement(b.a,{size:"small",color:n?"secondary":"primary","aria-label":"Pause",onClick:function(e){"playing"===a?t.pause():"paused"===a&&t.play(),e.stopPropagation()},disableFocusRipple:!0,disableRipple:!0},"playing"===a?n?r.a.createElement(B.a,{style:{fontSize:"3em",opacity:".8"}}):r.a.createElement(q.a,{style:{fontSize:"4em"},color:"primary"}):"paused"===a||"loaded"===a?n?r.a.createElement(Y.a,{style:{fontSize:"3em",opacity:".8"}}):r.a.createElement(K.a,{style:{fontSize:"4em"},color:"primary"}):"loading"===a?r.a.createElement(h.a,null):void 0)},J=a(224),_=function(e){var t=e.onPlayNext;return r.a.createElement(b.a,{color:"primary","aria-label":"Next",onClick:t},r.a.createElement(J.a,{fontSize:"large"}))},X=a(225),Q=function(e){var t=e.playPrevious;return r.a.createElement(b.a,{color:"primary","aria-label":"Pause",onClick:t},r.a.createElement(X.a,{fontSize:"large"}))},$=a(44),Z=a(277),ee=a(226),te=a(107),ae=a.n(te),ne=a(28),re=300,ce={time:0,target:null};var oe,ie=function(e){var t=e.data,a=e.rating,c=e.audioEl,o=Object(W.a)({onSwipedUp:function(e){h()}}),i=Object(n.useState)({transform:"scale(0)"}),s=Object(l.a)(i,2),u=s[0],m=s[1],d={background:"url(".concat(ae.a,") no-repeat"),padding:"18px",position:"relative",zIndex:"1"},p=Object(n.useCallback)(function(){m({transform:"scale(0)"}),setTimeout(function(){m({transform:"scale(1)"})},300)},[m]),h=Object(n.useCallback)(function(){Object(ne.g)(t.id,"disliked"),m({transform:"scale(0)"}),setTimeout(function(){m({transform:"scale(1)",color:"#2d3436"})},300)},[m,t.id]);r.a.useEffect(function(){"liked"===a?p():"disliked"===a?h():m({transform:"scale(0)"})},[a,p,h,m]);return r.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{marginTop:"40px"},onClick:function(e){(function(e){var t={time:(new Date).getTime(),target:e.currentTarget},a=t.target===ce.target&&t.time-ce.time<re;return ce=t,a})(e)&&(p(),Object(ne.g)(t.id,"liked",c))}},r.a.createElement($.b.div,Object.assign({className:"box",drag:!0,dragElastic:!0,dragTransition:{bounceStiffness:100,bounceDamping:10},dragConstraints:{left:0,right:0,top:0,bottom:0},style:d},o),r.a.createElement(ee.a,{className:"songHeart left",style:u}),r.a.createElement(ee.a,{className:"songHeart right",style:u}),r.a.createElement(Z.a,{className:"searchThumb",style:{width:"215px",height:"215px",boxShadow:"#0000008c 1px 3px 8px"},alt:"video thumbnail",src:t.thumbnail?window.URL.createObjectURL(t.thumbnail):t.maxThumbnail,imgProps:{onLoad:function(e){return function(e){e.target.naturalWidth<400&&(e.target.src=t.sdThumbnail)}(e)}}})),r.a.createElement("br",null),r.a.createElement(N.a,{color:"primary",variant:"h5",className:"musicArtTitle",align:"center"},function(e){var t=new RegExp(e.channelTitle+" - | : ","g");return e.title.replace(t,"")}(t)),r.a.createElement(N.a,{color:"primary",variant:"subtitle1"},t.channelTitle),r.a.createElement("br",null))},le=a(4),se=a(278),ue=Object(le.a)({root:{height:6},thumb:{height:16,width:16,marginTop:-5.3,marginLeft:-8,"&::before":{content:"''",height:"inherit",width:"inherit",position:"absolute",transform:"scale(1.6)",borderRadius:"50px",border:"1px solid"}},track:{height:6,borderRadius:4},rail:{height:6,borderRadius:4}})(se.a),me=Object(le.a)({root:{height:4,position:"relative",bottom:"16px",color:"#FFFDFD",padding:0},thumb:{display:"none"},track:{height:4,borderRadius:0},rail:{height:4,borderRadius:0}})(se.a),de=function(e){var t=Math.floor(e/60),a=Math.ceil(e-60*t);return a<10&&(a="0".concat(a)),"".concat(t,":").concat(a)},pe=function(e){var t=e.audioState,a=e.player,c=e.minimized,o=Object(n.useState)(50),i=Object(l.a)(o,2),s=(i[0],i[1],Object(n.useState)(0)),u=Object(l.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)(function(){var e;return a&&d(a.currentTime),"playing"===t?e=setInterval(function(){d(a.currentTime),console.log()},800):clearInterval(e),function(){return clearInterval(e)}},[t,a]);return c?r.a.createElement(me,{value:m,max:a?a.duration:0}):r.a.createElement("div",{style:{margin:"0 auto",width:"90%"}},r.a.createElement(f.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(N.a,{variant:"body1",color:"primary"},de(m)),r.a.createElement(N.a,{variant:"body1",color:"primary"},a?a.duration?de(a.duration):"0:00":0)),r.a.createElement(ue,{value:m,onChange:function(e,t){a.currentTime=t,d(t)},max:a?a.duration:0}))},fe=a(239),he=a(240),be=a(241),ge=a(242),ye=a(243),ve=a(227),Ee=function(e){var t=e.player,a=(e.setPlayerState,Object(n.useState)(100)),c=Object(l.a)(a,2),o=c[0],i=c[1];return r.a.createElement(f.a,{container:!0,spacing:1,style:{maxWidth:"200px"}},r.a.createElement(f.a,{item:!0},r.a.createElement(ve.a,{color:"primary"})),r.a.createElement(f.a,{item:!0,xs:3},r.a.createElement(se.a,{value:o,onChange:function(e,a){i(a),t.volume=a/100}})))},Oe=a(113),je=a(228),we=a(232),xe=a(231),Se=a(238),ke=a(233),Ce=a(236),Te=a(237),ze=a(110),Ie=(a(161),function(e,t){var a=JSON.stringify({time:e,alwaysOn:t});localStorage.setItem("sleepTimerSettings",a)}),Re=function(){var e=localStorage.getItem("sleepTimerSettings");return JSON.parse(e)},De=function(){localStorage.removeItem("sleepTimerSettings")};var Pe,Ne=function(e){var t=e.player,a=Object(n.useState)(20),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),h=f[0],b=f[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),v=y[0],E=y[1],O=function(e){console.log("timer has been set with time",e),clearTimeout(oe),E(!0),oe=setTimeout(function(){t.pause()},60*e*1e3)};return Object(n.useEffect)(function(){var e=Re();e&&(i(e.time),b(e.alwaysOn)),e&&e.alwaysOn&&(console.log(e),O(e.time)),console.log(e)},[]),r.a.createElement(r.a.Fragment,null,v?r.a.createElement(Ce.a,{color:"primary",onClick:function(){return d(!0)}}):r.a.createElement(Te.a,{color:"primary",onClick:function(){return d(!0)}}),r.a.createElement(je.a,{style:{zIndex:1400},open:m,onClose:function(){return d(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(N.a,{variant:"h5",color:"primary",align:"center",style:{marginTop:"10px"}},"Pause Music After"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"textContainer"},o,r.a.createElement("div",{className:"minute"},"MINUTES")),r.a.createElement(ze.CircleSlider,{value:o,stepSize:5,onChange:function(e){return i(e)},size:300,max:120,gradientColorFrom:"#ec008c",gradientColorTo:"#fc6767",knobRadius:25,progressWidth:30,circleWidth:30})),r.a.createElement(we.a,null,r.a.createElement(xe.a,{value:"Always On",control:r.a.createElement(Se.a,{checked:h,onChange:function(e){return b(e.target.checked)},value:"checked always on",color:"primary"}),label:"ALWAYS",labelPlacement:"end",style:{color:"#e91e63"}}),r.a.createElement(ke.a,{color:"primary",onClick:function(){De(),E(!1),d(!1)}},"Remove"),r.a.createElement(ke.a,{color:"primary",onClick:function(){Ie(o,h),d(!1),O(o)}},"Set"))))},Ae=Object(le.a)({root:{height:2,width:"70%",margin:"0 auto",transform:"translateY(-10px)"}})(fe.a),Me=function(e){var t=e.song,a=e.player,c=e.setPlayerState,o=e.history,s=Object(n.useContext)(i.a).snackbarMsg,u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(!1),b=Object(l.a)(h,2),g=b[0],y=b[1],v=Object(Oe.useSongMethods)(),E=v.handleDownload,O=v.handleRemoveSong,j=v.deleteDialogComponent;Object(n.useEffect)(function(){("Song Downloaded"===s||t.audio)&&(p(!0),y(!1))},[s]);return r.a.createElement(f.a,{container:!0,justify:"space-between",direction:"row",style:{padding:" 0 10px",marginTop:"10px",position:"absolute",top:"0"}},r.a.createElement(Ee,{player:a}),j,r.a.createElement(he.a,{style:{transform:" scaleX(-1) translateY(-2px)"},onClick:function(){navigator.share&&navigator.share({title:"Share This Song",text:"Hey Listen to ".concat(t.title," on Ylight Music"),url:window.location.href}).then(function(){return console.log("Successful share")}).catch(function(e){return console.log("Error sharing",e)})},color:"primary"}),r.a.createElement(Ne,{player:a}),r.a.createElement("div",null,d?r.a.createElement(be.a,{color:"primary",onClick:function(){return O(t.id)}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{color:"primary",onClick:function(){E(t.id),y(!0)}})),g?r.a.createElement(Ae,{color:"primary"}):null),r.a.createElement(ye.a,{onClick:function(){o.goBack(),c("minimized")},color:"primary",fontSize:"large",style:{transform:"translateY(-7px)"}}))},Le=a(244),Ve=(a(162),function(e){var t=e.playPause,a=e.data,n=e.playNext,c=e.emptyPlayer;return r.a.createElement("div",{className:"mainContainer"},r.a.createElement("div",{className:"overflow-hidden"},r.a.createElement("div",{className:"details"},r.a.createElement(N.a,{variant:"body1"},a.title),r.a.createElement(N.a,{variant:"body2"},a.channelTitle)),r.a.createElement("div",{className:"buttons"},r.a.createElement(J.a,{onClick:n}),r.a.createElement(Le.a,{onClick:c})),r.a.createElement("div",{className:"miniArtContainer"},r.a.createElement("div",{className:"mainArt"},r.a.createElement("img",{className:"miniArtImg",src:a.thumbnail?window.URL.createObjectURL(a.thumbnail):a.sdThumbnail,alt:"music art"}),r.a.createElement(G,{player:t.player,minimized:t.minimized,audioState:t.audioState})))))}),Fe=a(63),He=a(112),Ue=a(245),We=a(246),Be=a(247),qe=a(248),Ye=a(249),Ke=a(250),Ge=a(251),Je=function(e){var t=e.toggleMaxPlaylist,a=e.setPlaylist,c=e.playerState,o=e.relatedVideos,s=e.setRelatedVideos,u=e.setIsRepeatOn,m=e.isRepeatOn,d=Object(n.useContext)(i.a),p=Object(l.a)(d,2);Object(Fe.a)(p[0]);var h=p[1],b={type:"spring",damping:20,stiffness:300},g=function(e){var t;t={id:e.id.videoId,title:e.snippet.title,channelTitle:e.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/sddefault.jpg")},h({type:"setCurrentVideoSnippet",snippet:t}),a()};if(!(o.length>1))return r.a.createElement(fe.a,null);Pe=o.map(function(e){return r.a.createElement($.b.li,{key:e.id.videoId,positionTransition:b},r.a.createElement(S.a,{button:!0,onClick:function(){return g(e)}},r.a.createElement(k.a,null,r.a.createElement(Ue.a,{style:{color:"#fff"}})),r.a.createElement(C.a,{primary:e.snippet.title.slice(0,40),secondary:e.snippet.channelTitle.slice(0,40)})))});return r.a.createElement("div",{className:"RelatedVideoContainer"},r.a.createElement(f.a,{className:"playlistHeader",container:!0,direction:"row",alignItems:"center",justify:"space-between"},r.a.createElement(qe.a,null),r.a.createElement(N.a,{variant:"h6"},"Coming Next"),r.a.createElement(Ye.a,{onClick:function(){var e;s((e=o).reduce(function(e,t,a){var n=Math.floor(Math.random()*e.length),r=e[a];return e[a]=e[n],e[n]=r,e},Object(He.a)(e)))}}),m?r.a.createElement(Ke.a,{onClick:u}):r.a.createElement(Ge.a,{onClick:u}),"playlist"===c?r.a.createElement(We.a,{onClick:t}):r.a.createElement(Be.a,{onClick:t})),r.a.createElement(T.a,{dense:!0},Pe))},_e=a(68),Xe=localStorage.getItem("country_code");Xe||function(){var e=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("https://ipapi.co/json/",{mode:"no-cors"});case 2:t=e.sent,localStorage.setItem("country_code",t.data.country);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()();a(120);var Qe,$e,Ze=function(e){var t=e.location,a=e.history,c=new URLSearchParams(t.search),o=Object(n.useContext)(i.a),s=Object(l.a)(o,2),u=s[0],m=u.currentVideoSnippet,h=u.themeSelectValue,b=s[1],g=function(e){b({type:"setCurrentVideoSnippet",snippet:e})},y=Object(n.useState)([]),v=Object(l.a)(y,2),E=v[0],O=v[1],j=Object(n.useState)(!1),w=Object(l.a)(j,2),x=w[0],S=w[1],k=Object(n.useState)(null),C=Object(l.a)(k,2),T=C[0],z=C[1],I=Object(n.useState)(null),D=Object(l.a)(I,2),P=D[0],N=D[1],A=Object(n.useState)(!0),M=Object(l.a)(A,2),L=M[0],V=M[1],F=Object(n.useState)(!1),H=Object(l.a)(F,2),U=H[0],B=H[1],q=Object(n.useState)("none"),Y=Object(l.a)(q,2),K=Y[0],J=Y[1],X=Object(n.useState)(!1),$=Object(l.a)(X,2),Z=$[0],ee=$[1],te=Object(n.useState)(null),ae=Object(l.a)(te,2),re=(ae[0],ae[1],document.querySelector("body")),ce=Object(n.useRef)(),oe=ce.current,le=function(){"mediaSession"in navigator&&(console.log("navigator setupped"),navigator.mediaSession.metadata=new window.MediaMetadata({title:m.title,artist:m.channelTitle,artwork:[{src:m.sdThumbnail,sizes:"512x512",type:"image/png"}]}),navigator.mediaSession.setActionHandler("play",function(){se()}),navigator.mediaSession.setActionHandler("pause",function(){ce.current.pause()}),navigator.mediaSession.setActionHandler("previoustrack",function(){fe()}),navigator.mediaSession.setActionHandler("nexttrack",function(){de()}))},se=function(){ce.current.play().then(function(e){console.log("audio played auto"),le()}).catch(function(e){console.log("playback prevented"),z("paused")})};Object(n.useEffect)(function(){console.log("state changed triggedred");var e=function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"playlist"===P||Z||(N("maximized"),console.log("maximizing here yar and state is",P)),setTimeout(function(){ee(!1)},200),z("loading"),e.next=5,_e.a.get("/song",{params:{id:t}});case 5:a=e.sent,ce.current.src=a.data,se();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(m.audio?(console.log("yes its downloaded we will play from local file"),N("maximized"),z("loading"),ce.current.src=window.URL.createObjectURL(m.audio),se()):m.id&&e(m.id),m.id){var n=function(){var e=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("/search",{params:{relatedToVideoId:m.id,maxResults:10}});case 2:t=e.sent,O(t.data.items);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Z||(x?(a.replace("/play?id=".concat(m.id)),S(!1)):("/play"!==t.pathname&&a.push("/play?id=".concat(m.id)),n())),console.log(m)}J("none")},[m,S]),Object(n.useEffect)(function(){Qe=E,console.log("related",E)},[E]),Object(n.useEffect)(function(){console.log("isnext state",Z)},[Z]);var ue=function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.a.get("/song",{params:{id:t}});case 2:a=e.sent,ce.current.src=a.data,se();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),me=function(e){g({id:e.id.videoId,title:e.snippet.title,channelTitle:e.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/hqdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/sddefault.jpg")}),document.hidden&&ue(e.id.videoId)},de=function(){S(!0),console.log("play next related videos",E);var e,t=Qe.findIndex(function(e){return e.id.videoId===m.id});console.log("the current index is",t),console.log("hey we will play next song"),e=Qe[t+1],me(e)},fe=function(){if(S(!0),oe.currentTime>5)oe.currentTime=0;else{var e,t=Qe.findIndex(function(e){return e.id.videoId===m.id});-1!==t?(e=Qe[t-1],me(e)):oe.currentTime=0}},he={position:"fixed",right:0,bottom:0,background:"#fff",width:"100%",height:"100%",zIndex:1400,display:"inline block",transition:"all .3s ease"};"minimized"===P&&(he.transform="translateY(calc(100% - 106px))",he.zIndex=0,he.background="Dark"===h?"#333":"#e91e63",re.style.overflow="auto"),"maximized"===P&&(re.style.overflow="hidden","Dark"===h&&(he.background="#333")),"playlist"===P&&(he.transform="translateY(-418px)");var be=function(){"minimized"===P&&(N("maximized"),V(!0),a.push({pathname:"/play",search:"?id=".concat(m.id),state:{modal:!0}}))},ge=function(){N("playlist"===P?"maximized":"playlist"),console.log("Maximize the playlist")},ye=function(){var e=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.i)(m);case 2:t=e.sent,J(t),console.log(t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ve=0,Ee=Object(n.useRef)(null),Oe=Object(W.a)({onSwipedDown:function(e){N("minimized"),a.goBack()},onSwiping:function(e){0===ve&&(ve=e.event.changedTouches[0].screenY);var t=e.event.changedTouches[0].screenY,a=Math.round(t-ve);a<1&&(a=0);var n=Ee.current.style;n.transform="translateY(".concat(a,"px)"),n.transition="none"},onSwiped:function(e){ve=0,Ee.current.style=""},onSwipedUp:function(e){"minimized"===P&&N("maximized")},onSwipedRight:function(e){var t=setTimeout(function(){clearTimeout(t),de()},250)},onSwipedLeft:function(e){var t=setTimeout(function(){clearTimeout(t),fe()},250)}}),je=Object(W.a)({onSwipedUp:function(e){be()}});Object(n.useEffect)(function(){"/play"!==t.pathname||m.id||(console.log("history is in play fetching song"),we(c.get("id"))),a.listen(function(e){"/play"===e.pathname?"REPLACE"!==a.action&&(N("maximized"),console.log("set player state to maximized")):(N("minimized"),console.log("set player state to minimized")),console.log(a)})},[a]),Object(n.useEffect)(function(){console.log(P)},[P]);var we=function(e){R.a.get("videos",{params:{id:e}}).then(function(e){var t=e.data.items[0];console.log(m),g({id:t.id,title:t.snippet.title,channelTitle:t.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(t.id,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(t.id,"/sddefault.jpg")})})};return m.id?r.a.createElement("div",{ref:Ee,onClick:be,className:"mediaPlayerContainer "+("minimized"===P?"playerMinimized":"playlist"===P?"playerPlaylist":void 0)},function(){if("maximized"===P||"playlist"===P)return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{container:!0,direction:"column",className:"main-player-inner",style:{height:" calc(100vh - 46px)",justifyContent:"space-evenly"}},r.a.createElement(Me,{song:m,player:oe,setPlayerState:N,history:a}),r.a.createElement("div",Object.assign({},Oe,{className:"musicArtContainer"}),r.a.createElement(ie,{data:m,rating:K,audioEl:oe})),r.a.createElement(pe,{audioState:T,player:oe}),r.a.createElement(f.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center",style:{maxWidth:"290px",height:"80px",margin:"0 auto"}},r.a.createElement(Q,{playPrevious:fe}),r.a.createElement(G,{player:oe,audioState:T}),r.a.createElement(_,{onPlayNext:de}))),r.a.createElement(Je,{toggleMaxPlaylist:ge,setPlaylist:function(){return S(!0)},playerState:P,relatedVideos:E,setRelatedVideos:function(e){return O(e)},isRepeatOn:U,setIsRepeatOn:function(){B(!U)}}))}(),function(){if("minimized"===P&&m.id)return r.a.createElement("div",je,r.a.createElement(Ve,{playPause:{player:oe,minimized:L,audioState:T},playNext:function(e){e.stopPropagation(),ee(!0),de()},data:m,emptyPlayer:function(e){e.stopPropagation(),g([])}}),r.a.createElement(pe,{audioState:T,player:oe,minimized:L}))}(),r.a.createElement("audio",{onLoadStart:function(){z("loading")},id:"audio-element",onLoadedData:ye,onPlay:function(){return z("playing")},onPlaying:function(){return z("playing")},onPause:function(){return z("paused")},onEnded:function(){U?(ce.current.currentTime=0,se()):de()},autoPlay:!0,ref:ce})):null},et=a(275),tt=a(235),at=a(256),nt=a(252),rt=a(253),ct=a(254),ot=a(255),it=a(257),lt=(a(163),a(88)),st=a.n(lt),ut=a(89),mt=a.n(ut),dt=function(){var e=Object(n.useContext)(i.a),t=Object(l.a)(e,2),a=t[0],c=a.menuOpen,o=a.themeSelectValue,u=t[1],m=function(e){u({type:"setMenuOpen",snippet:e})},d=Object(n.useCallback)(function(e){u({type:"setThemeSelectValue",snippet:e})},[u]),p=Object(n.useState)(!1),f=Object(l.a)(p,2),h=f[0],b=f[1];Object(n.useEffect)(function(){b("Dark"===o)},[o]);var g=function(e){d(e),localStorage.setItem("selectedTheme",e)};return r.a.createElement(et.a,{open:c,onClose:function(){return m(!1)},onOpen:function(){return m(!0)}},r.a.createElement("div",{style:{width:"300px"}},r.a.createElement("div",{style:{margin:"35px",position:"relative",width:"30px",height:"30px"}},r.a.createElement($.a,null,r.a.createElement($.b.img,{key:h?mt.a:st.a,initial:{scale:0},animate:{scale:1.5,rotate:"360deg"},exit:{scale:0},src:h?mt.a:st.a,onClick:function(){h?(g("Default"),b(!0)):(g("Dark"),b(!1))},className:"dayNightToggleBtn",alt:"sun moon icon"}))),r.a.createElement(tt.a,null),r.a.createElement(T.a,{component:"nav",className:"pinkLists",onClick:function(){return m(!1)}},r.a.createElement(S.a,{button:!0,component:s.b,to:"/settings"},r.a.createElement(k.a,null,r.a.createElement(nt.a,null)),r.a.createElement(C.a,{primary:"Settings"})),r.a.createElement(S.a,{button:!0,component:s.b,to:"/feedback"},r.a.createElement(k.a,null,r.a.createElement(rt.a,null)),r.a.createElement(C.a,{primary:"Feedback"})),r.a.createElement(S.a,{button:!0,component:s.b,to:"/donate"},r.a.createElement(k.a,null,r.a.createElement(ct.a,null)),r.a.createElement(C.a,{primary:"Donate & Support"})),r.a.createElement(S.a,{button:!0,component:s.b,to:"/contributors"},r.a.createElement(k.a,null,r.a.createElement(ot.a,null)),r.a.createElement(C.a,{primary:"Contributors"})),r.a.createElement(S.a,{button:!0,component:at.a,target:"blank",href:"https://github.com/ShivamJoker/Ylight-Music-Client"},r.a.createElement(k.a,null,r.a.createElement("svg",{width:"24","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"github",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",fill:"#e91e63"},r.a.createElement("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}))),r.a.createElement(C.a,{primary:"Github"})),r.a.createElement(S.a,{button:!0,component:s.b,to:"/privacy"},r.a.createElement(k.a,null,r.a.createElement(it.a,null)),r.a.createElement(C.a,{primary:"Privacy & Policy"})))))},pt=a(273),ft=a(265),ht=a(266),bt=a(267),gt=a(268),yt=a(271),vt=a(272),Et=a(261),Ot=a(262),jt=a(263),wt=a(264),xt=function(){var e=Object(n.useContext)(i.a),t=Object(l.a)(e,2),a=t[0].themeSelectValue,c=t[1],o=Object(n.useCallback)(function(e){c({type:"setThemeSelectValue",snippet:e})},[c]);Object(n.useEffect)(function(){console.log(a)},[a]);var s=r.a.createElement(yt.a,{m:1},r.a.createElement(vt.a,{value:a,onChange:function(e){o(e.target.value),localStorage.setItem("selectedTheme",e.target.value)},displayEmpty:!0,name:"age"},r.a.createElement(Et.a,{value:"Default"},"Default"),r.a.createElement(Et.a,{value:"Dark"},"Dark"),r.a.createElement(Et.a,{value:"Auto"},"Auto")));return r.a.createElement(Ot.a,null,r.a.createElement("br",null),r.a.createElement(N.a,{variant:"h5",align:"center",gutterBottom:!0},"Settings"),r.a.createElement(jt.a,{component:"fieldset"},r.a.createElement(wt.a,{row:!0},r.a.createElement(xe.a,{labelPlacement:"start",label:"Select Theme ",value:"top",control:s}))))},St=Object(n.lazy)(function(){return a.e(4).then(a.bind(null,304))}),kt=Object(n.lazy)(function(){return Promise.resolve().then(a.bind(null,113))}),Ct=Object(n.lazy)(function(){return Promise.all([a.e(5),a.e(9)]).then(a.bind(null,297))}),Tt=Object(n.lazy)(function(){return a.e(7).then(a.bind(null,302))}),zt=Object(n.lazy)(function(){return Promise.all([a.e(8),a.e(10)]).then(a.bind(null,298))}),It=Object(n.lazy)(function(){return a.e(11).then(a.bind(null,299))}),Rt=Object(n.lazy)(function(){return a.e(3).then(a.bind(null,300))}),Dt=Object(n.lazy)(function(){return a.e(6).then(a.bind(null,301))}),Pt=Object(le.a)({root:{background:"#e91e63",position:"fixed",bottom:"0",padding:0,width:"100%",zIndex:1300},indicator:{display:"none"},labelIcon:{margin:0}})(pt.a),Nt=Object(le.a)({root:{color:"#FFB2C1",fontSize:".75rem",margin:0,"&:hover":{color:"#ffffffed",opacity:1},"&$selected":{color:"#fff"},"&:focus":{color:"#FFFFFF"}},selected:{}})(ft.a),At=void 0;window.addEventListener("beforeinstallprompt",function(e){At=e});var Mt=Object(u.f)(function(e){var t=e.history,a=e.location,c=Object(n.useContext)(i.a),o=Object(l.a)(c,1)[0],m=o.currentVideoSnippet,b=o.searchResult;console.log(m);var g=Object(n.useState)([]),y=Object(l.a)(g,2),v=y[0],E=y[1],O=Object(n.useState)([]),j=Object(l.a)(O,2),w=j[0],x=j[1],S=Object(n.useState)([]),k=Object(l.a)(S,2),C=k[0],T=k[1],z=Object(n.useState)(0),I=Object(l.a)(z,2),R=I[0],D=I[1],P=Object(n.useState)(0),N=Object(l.a)(P,2),A=N[0],M=N[1],L=Object(n.useState)(null),V=Object(l.a)(L,2),F=V[0],H=V[1],U=r.a.createElement(f.a,{style:{height:"100vh"},container:!0,justify:"center",alignItems:"center"},r.a.createElement(h.a,null));var W=Object(n.useCallback)(Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=R,e.next=1===e.t0?3:2===e.t0?9:3===e.t0?15:21;break;case 3:return e.t1=x,e.next=6,Object(ne.f)();case 6:return e.t2=e.sent,(0,e.t1)(e.t2),e.abrupt("break",22);case 9:return e.t3=T,e.next=12,Object(ne.d)();case 12:return e.t4=e.sent,(0,e.t3)(e.t4),e.abrupt("break",22);case 15:return e.t5=E,e.next=18,Object(ne.e)();case 18:return e.t6=e.sent,(0,e.t5)(e.t6),e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:case"end":return e.stop()}},e)})),[R]);Object(n.useEffect)(function(){W()},[R,W]),Object(n.useEffect)(function(){W(),console.log("fetching the songs")},[A,W]),Object(n.useEffect)(function(){ne.a.on("changes",function(){M(function(e){return e+1})}),Object(ne.h)(),"no"===localStorage.getItem("isThisNew")&&H(!0),$e=a,t.listen(function(e){"/play"!==e.pathname&&($e=e,console.log($e))})},[]),Object(n.useEffect)(function(){F&&"/"===t.location.pathname&&t.replace("/home")},[H,t,F]);var B=function(){localStorage.setItem("isThisNew","no"),t.replace("/home"),At&&(At.prompt(),At.userChoice.then(function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),At=null}))};return r.a.createElement("div",null,r.a.createElement(n.Suspense,{fallback:U},r.a.createElement(u.c,{location:"/play"===a.pathname?$e:a},r.a.createElement(u.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(St,{continueToHome:B})}}),r.a.createElement(u.a,{path:"/search",render:function(e){return r.a.createElement(Ct,{videos:b})}}),r.a.createElement(u.a,{path:"/home",render:function(e){return D(0),r.a.createElement(Tt,null)}}),r.a.createElement(u.a,{path:"/liked",render:function(e){return D(1),r.a.createElement(kt,Object.assign({songs:w},e,{key:a.pathname}))}}),r.a.createElement(u.a,{path:"/downloads",render:function(e){return D(2),r.a.createElement(kt,{songs:C,key:a.pathname})}}),r.a.createElement(u.a,{path:"/history",render:function(e){return D(3),r.a.createElement(kt,{songs:v,key:a.pathname})}}),r.a.createElement(u.a,{path:"/app",render:function(e){return window.location.replace("https://play.google.com/store/apps/details?id=com.ylightmusic.app"),r.a.createElement("div",null,"Redirecting you to play store")}}),r.a.createElement(u.a,{path:"/settings",component:xt}),r.a.createElement(u.a,{path:"/privacy",component:It}),r.a.createElement(u.a,{path:"/feedback",component:zt}),r.a.createElement(u.a,{path:"/donate",component:Rt}),r.a.createElement(u.a,{path:"/contributors",component:Dt})),r.a.createElement(u.a,{path:"/",render:function(e){return function(e){return"/"!==window.location.pathname?r.a.createElement(Ze,e):null}(e)}}),r.a.createElement("div",{style:{height:m.id?"100px":"50px"}})),r.a.createElement(Pt,{value:R,onChange:function(e,t){D(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},r.a.createElement(Nt,{icon:r.a.createElement(ht.a,null),"aria-label":"Home",component:s.b,to:"/home",label:"Home"}),r.a.createElement(Nt,{icon:r.a.createElement(bt.a,null),"aria-label":"Liked",component:s.b,to:"/liked",label:"Liked"}),r.a.createElement(Nt,{icon:r.a.createElement(ge.a,null),"aria-label":"Downloads",component:s.b,to:"/downloads",label:"Downloads"}),r.a.createElement(Nt,{icon:r.a.createElement(gt.a,null),"aria-label":"History",component:s.b,to:"/history",label:"History"})))}),Lt=(a(276),a(111)),Vt=a(269),Ft=a(79),Ht=document.querySelector("body"),Ut={palette:{primary:Ft.a,secondary:{main:"#fafafa"}},typography:{useNextVariants:!0}},Wt={palette:{type:"dark",primary:Ft.a,secondary:{main:"#fafafa"}},typography:{useNextVariants:!0}},Bt=Object(Lt.a)(Wt),qt=Object(Lt.a)(Ut),Yt=function(){var e=Object(n.useContext)(i.a),t=Object(l.a)(e,2),a=t[0].themeSelectValue,c=(t[1],function(){var e=Object(n.useContext)(i.a),t=Object(l.a)(e,2)[1],a=Object(n.useCallback)(function(e){t({type:"setThemeSelectValue",snippet:e})},[t]);return{checkDarkMode:function(){var e=localStorage.getItem("selectedTheme");if(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){e.matches?a("Dark"):a("Default")}),e){console.log(e),a(e);var t=(new Date).getHours();"Auto"===e&&a(t>=18||t<=6?"Dark":"Default")}}}}().checkDarkMode);return Object(n.useEffect)(function(){c(),navigator.userAgent.match(/Android/i)&&(Ht.style.overscrollBehavior="none")},[]),Object(n.useEffect)(function(){"Dark"===a?Ht.classList.add("dark"):Ht.classList.remove("dark")},[a]),r.a.createElement(Vt.a,{theme:"Dark"===a?Bt:qt},r.a.createElement(s.a,null,r.a.createElement(U,null),r.a.createElement(u.a,{component:Mt}),r.a.createElement(dt,null)))};var Kt=function(){return r.a.createElement(i.b,null,r.a.createElement(Yt,null))},Gt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Jt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Kt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/musicApp",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/musicApp","/service-worker.js");Gt?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Jt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Jt(t,e)})}}()},18:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return s});var n=a(26),r=a(0),c=a.n(r),o=c.a.createContext(),i={searchState:"home",searchResult:[],relatedVideos:[],menuOpen:!1,snackbarMsg:!1,currentVideoSnippet:{},themeSelectValue:"Default"},l=function(e,t){switch(t.type){case"setCurrentVideoSnippet":return Object(n.a)(Object(n.a)({},e),{},{currentVideoSnippet:t.snippet});case"setRelatedVideos":return Object(n.a)(Object(n.a)({},e),{},{relatedVideos:t.snippet});case"setSnackbarMsg":return Object(n.a)(Object(n.a)({},e),{},{snackbarMsg:t.snippet});case"setThemeSelectValue":return Object(n.a)(Object(n.a)({},e),{},{themeSelectValue:t.snippet});case"setSearchState":return Object(n.a)(Object(n.a)({},e),{},{searchState:t.snippet});case"setSearchResult":return Object(n.a)(Object(n.a)({},e),{},{searchResult:t.snippet});case"setMenuOpen":return Object(n.a)(Object(n.a)({},e),{},{menuOpen:t.snippet});default:return e}},s=function(e){var t=Object(r.useReducer)(l,i);return c.a.createElement(o.Provider,{value:t},e.children)}},28:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"i",function(){return s}),a.d(t,"g",function(){return u}),a.d(t,"e",function(){return m}),a.d(t,"f",function(){return d}),a.d(t,"d",function(){return p}),a.d(t,"h",function(){return f}),a.d(t,"c",function(){return h}),a.d(t,"b",function(){return b});var n=a(8),r=a(11),c=a.n(r),o=a(19),i=a(13),l=(a(158),a(159),a(160),new i.a("Song_Database"));l.version(1).stores({songs:"&videoId, timestamp, playbackTimes, [rating+timestamp], [downloadState+timestamp]"}),l.version(2).stores({});var s=function(){var e=Object(o.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={videoId:t.id,timestamp:Date.now(),title:t.title,channelTitle:t.channelTitle,playbackTimes:1},e.next=3,l.songs.get({videoId:t.id});case 3:if(!(n=e.sent)){e.next=10;break}return l.songs.update(t.id,{timestamp:Date.now(),playbackTimes:n.playbackTimes+1}),console.log("song updated"),e.abrupt("return",n.rating);case 10:console.log("song added"),l.songs.add(a);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(c.a.mark(function e(t,a){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.songs.update(t,{rating:a});case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.songs.orderBy("timestamp").limit(500).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.songs.where("[rating+timestamp]").between(["liked",i.a.minKey],["liked",i.a.maxKey]).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.songs.where("[downloadState+timestamp]").between(["downloaded",i.a.minKey],["downloaded",i.a.maxKey]).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.songs.where("[downloadState+timestamp]").between(["downloading",i.a.minKey],["downloading",i.a.maxKey]).modify(function(e){delete e.downloadState});case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(c.a.mark(function e(t,a){var r,o,i,s,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l.songs.update(t,{downloadState:"downloading"}),r="https://i.ytimg.com/vi/".concat(t,"/hqdefault.jpg"),e.next=5,Promise.all([g(r),g(a)]);case 5:return o=e.sent,i=Object(n.a)(o,2),s=i[0],u=i[1],l.songs.update(t,{downloadState:"downloaded",thumbnail:s,audio:u}),e.abrupt("return","downloaded");case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.songs.where({videoId:t}).modify(function(e){delete e.audio,delete e.downloadState});case 2:return e.abrupt("return","song deleted");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function g(e){var t=e;return new Promise(function(e,a){var n=new XMLHttpRequest;n.open("GET","https://server.ylight.xyz/proxy/"+t),n.responseType="blob",n.onload=function(){var t=n.status;t>=200&&t<300?e(n.response):a({status:t,statusText:n.statusText})},n.send(),setTimeout(function(){n.abort(),n.open("GET","https://server.ylight.xyz/proxy/"+t),n.send()},1e3)})}},64:function(e,t,a){"use strict";var n=a(43),r=a.n(n);t.a=r.a.create({baseURL:"https://www.googleapis.com/youtube/v3",params:{part:"snippet",videoCategoryId:"10",type:"video",key:function(){var e=["AIzaSyBQOrIXNurhz4htG_ThVh-hQGbHCSAb_8U"],t=Math.floor(Math.random()*Math.floor(e.length));return console.log("Random Value:",t),console.log("Keys random:",e[t]),e[t]}()}})},68:function(e,t,a){"use strict";var n=a(43),r=a.n(n);t.a=r.a.create({baseURL:"https://server.ylight.xyz",headers:{"Access-Control-Allow-Origin":"*"}})},88:function(e,t,a){e.exports=a.p+"static/media/moon-solid.bfe0ee19.svg"},89:function(e,t,a){e.exports=a.p+"static/media/sun-solid.f4e2a770.svg"}},[[129,1,2]]]);
//# sourceMappingURL=main.965c063f.chunk.js.map